# データベースの保持

## コンテナのファイルシステム

コンテナのファイルシステムは、イメージの様々なレイヤーである。同じイメージからできたコンテナであったとしても、ファイルシステムに対する変更は外部から確認することはできない。

### 実行して確認する

ubuntuコンテナを起動し、あるファイルを作成する。そしてそのファイルをコンテナ内で起動しているシェルに出力してみる。

2つのコンテナを起動した時、1つ目のコンテナで作成したファイルは2つ目のコンテナでは確認できなかった。これはコンテナが各々でスクラッチ領域を持っているからである。

## コンテナのボリューム

ボリュームでは、コンテナ内のあるファイルシステムのパスを、ホストマシン上にマウントすることができる。コンテナ内にディレクトリをマウントすると、再起動後も同じファイルを参照できる。

## データの保持

ボリュームを作成し、データを保管するディレクトリにマウントするとデータを保持することができる。

単なるデータの入れ物である名前付きボリュームを作成するには、`docker volume create todo-db`を実行する。その後`docker build -t getting-started .`を実行しコンテナイメージを作成し、`docker run -dp 3000:3000 -v todo-db:<path-to-deta-in-docker> getting-started`を実行しコンテナを起動する。

## ボリュームを深掘り

名前付きボリュームを利用するとき、実際にデータが保存される場所は`docker volume inspect <volume-name>`で確認できる。